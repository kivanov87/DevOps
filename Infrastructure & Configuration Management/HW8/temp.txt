resource "docker_image" "img-web" {
  name = "shekeriev/bgapp-web:latest"
}

resource "docker_container" "container-web" {
  name  = "bgapp-web"
  image = docker_image.img-web.latest
  ports {
    internal = 8080
    external = 80
  }

  provisioner "remote-exec" {
    inline = [
      "chmod +x /usr/local/bin/myscript.sh",
      "/usr/local/bin/myscript.sh"
    ]
    connection {
      type     = "ssh"
      user     = "ubuntu"
      password = "${var.remote_password}"
      host     = "${var.remote_host}"
    }
  }
}


resource "docker_image" "img-web" {
  name = var.v_image
}

resource "docker_image" "img-db" {
  name = var.v_image_db
}








#OUTPUT
container output
output "container-id" {
  value = docker_container.con-web.id
}

output "container-name" { 
  value = docker_container.con-web.name
}

output "container-id_db" {
  value = docker_container.con-db.id
}

output "container-name_db" { 
  value = docker_container.con-db.name
}
IMAGE OUTPUT
output "image_out" { 
  value = docker_image.img-web.name
}

output "image_out_db" { 
  value = docker_image.img-db.name
}