resource "docker_container" "bgapp-db" {
    name = "shekeriev/bgapp-db"
    image = docker_image.img-db.image_id
    ports {
        internal = "80" 
        external = "80" 
    } 
}


module "image" {
  source = "./image" 
  v_image = lookup(var.v_image, var.mode)
  v_image_db = lookup(var.v_image_db, var.mode)
}

module "container" {
  source = "./container"
  v_image = module.image.image_out
  v_con_name = lookup(var.v_con_name, var.mode)
  v_int_port = lookup(var.v_int_port, var.mode)
  v_ext_port = lookup(var.v_ext_port, var.mode)
  v_con_name_db = lookup(var.v_con_name_db, var.mode)
  v_int_port_db = lookup(var.v_int_port_db, var.mode)
  v_ext_port_db = lookup(var.v_ext_port_db, var.mode)

}
